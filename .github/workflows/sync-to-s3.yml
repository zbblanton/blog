name: Sync to S3
on:
  workflow_dispatch:
    inputs:
      name:
        description: 'Person to greet'
        required: true
        default: 'Mona the Octocat'
      home:
        description: 'location'
        required: false

jobs:
  checkout_repo:
    name: Checkout repo
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repo
      uses: actions/checkout@v2
  sync_to_s3:
    name: Sync blog to S3
    needs: checkout_repo
    runs-on: ubuntu-latest
    steps:
    - name: Sync blog to S3
      run: |
        pwd
        ls -la
        aws s3 ls s3://static-blog-blantontechnology/
        #aws s3 ls
        #aws s3 sync . s3://static-blog-blantontechnology --delete
        echo "Hello ${{ github.event.inputs.name }}!"
        echo "- in ${{ github.event.inputs.home }}!"
      env:
        AWS_ACCESS_KEY_ID: ${{ secrets.ACTIONS_USER_ACCESS_ID }}
        AWS_SECRET_ACCESS_KEY: ${{ secrets.ACTIONS_USER_SECRET_ID }}
        AWS_DEFAULT_REGION: us-east-1